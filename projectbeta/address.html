<?php
require_once $_SERVER['DOCUMENT_ROOT'].'/preset.php';
require_once $_SERVER['DOCUMENT_ROOT'].'/Naver.php';
$naver = new Naver(array(
        "CLIENT_ID" => "Bw3ZzfN9QKVedFZvGiK9",        // (*필수)클라이언트 ID  
        "CLIENT_SECRET" => "6MYc8n6McP",    // (*필수)클라이언트 시크릿
        "RETURN_URL" => "http://gorapaduk.dothome.co.kr/projectbeta/address.html",      // (*필수)콜백 URL
        "AUTO_CLOSE" => true,              // 인증 완료후 팝업 자동으로 닫힘 여부 설정 (추가 정보 기재등 추가행동 필요시 false 설정 후 추가)
        "SHOW_LOGOUT" => true              // 인증 후에 네이버 로그아웃 버튼 표시/ 또는 표시안함
        )
    );
require_once $_SERVER['DOCUMENT_ROOT'].'/Naverlogin.php';
                                        
?>
<!doctype html>
<html lang="en">
<head>
    <meta charset="utf-8" />
    <link rel="icon" type="image/png" href="assets/img/favicon.ico">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />

    <title>Beta 0.1</title>

    <meta content='width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0' name='viewport' />
    <meta name="viewport" content="width=device-width" />
    
    
    <!-- Bootstrap core CSS     -->
    <link href="assets/css/bootstrap.min.css" rel="stylesheet" />

    <!-- Animation library for notifications   -->
    <link href="assets/css/animate.min.css" rel="stylesheet"/>
    
    <!--  Light Bootstrap Table core CSS    -->
    <link href="assets/css/light-bootstrap-dashboard.css" rel="stylesheet"/>
    
    <!--  CSS for Demo Purpose, don't include it in your project     -->
    <link href="assets/css/demo.css" rel="stylesheet" />
    <!-- Hanjun , angular -->
    <script src="http://ajax.googleapis.com/ajax/libs/angularjs/1.4.8/angular.min.js"></script>     
        
    <!--     Fonts and icons     -->
    <link href="http://maxcdn.bootstrapcdn.com/font-awesome/4.2.0/css/font-awesome.min.css" rel="stylesheet">
    <link href='http://fonts.googleapis.com/css?family=Roboto:400,700,300' rel='stylesheet' type='text/css'>
    <link href="assets/css/pe-icon-7-stroke.css" rel="stylesheet" />

    <!-- Login -->    
    <script src="login-register.js" type="text/javascript"></script>    
    <link href="login-register.css" rel="stylesheet" />
    <!--<link rel="stylesheet" href="http://netdna.bootstrapcdn.com/font-awesome/4.0.3/css/font-awesome.css"> -->
    <!-- Login end -->
    <script src="assets/js/jquery-1.10.2.js" type="text/javascript"></script>
    <script src="js/main.js" type="text/javascript"></script>        
</head>
<body> 

<div class="wrapper">
    <div class="sidebar" data-color="purple" data-image="assets/img/sidebar-5.jpg">  
    
    <!--   you can change the color of the sidebar using: data-color="blue | azure | green | orange | red | purple" -->
    
    
        <div class="sidebar-wrapper">
            <div class="logo">                
                <?php
                    if($_SESSION['is_logged']=="YES"){
                        print '
                            <a href="http://gorapaduk.dothome.co.kr/" class="simple-text">
                        '.$_SESSION['login_user'].' 님, 반갑습니다
                            </a>
                        ';
                    }
                    else{
                        print '
                            <a href="http://gorapaduk.dothome.co.kr/" class="simple-text">
                                손님, 안뇽하세요
                            </a>
                        ';
                    }
                ?>               
            </div>
                       
            <ul class="nav">
                <li>
                    <a href="index.html">
                        <i class="pe-7s-home"></i> 
                        <p>Mainpage</p>
                    </a>            
                </li>
                
                <li>
                    <a href="inform.html">
                        <i class="pe-7s-comment"></i> 
                        <p>information</p>
                    </a>        
                </li>
                <li class="active">
                    <a href="">
                        <i class="pe-7s-call"></i> 
                        <p>Address History</p>
                    </a>        
                </li>
                <li>
                    <a href="maps.html">
                        <i class="pe-7s-map-marker"></i> 
                        <p>location</p>
                    </a>        
                </li>              
            </ul> 
        </div>
    </div>
    
    <div class="main-panel">
        <nav class="navbar navbar-default navbar-fixed">
            <div class="container-fluid">    
                <div class="navbar-header">
                    <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#navigation-example-2">
                        <span class="sr-only">Toggle navigation</span>
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                    </button>
                    <a class="navbar-brand" href="#">Table List</a>
                </div>
                <div class="collapse navbar-collapse">       
                    <ul class="nav navbar-nav navbar-left">
                        <li>
                            <a href="#" class="dropdown-toggle" onclick="refresh();" data-toggle="dropdown">
                                <i class="fa fa-dashboard"></i>
                            </a>
                        </li>
                        <li class="dropdown">
                              <a href="#" class="dropdown-toggle" onclick="removealarm();" data-toggle="dropdown">
                                    <i class="fa fa-globe"></i>
                                    <b class="caret"></b>
                                    <div id='newalram'></div>
                              </a>
                              <ul class="dropdown-menu" id='alarmcontent'>                                                              
                                <!--<li><a href="#">Notification 2</a></li>
                                <li><a href="#">Notification 3</a></li>
                                <li><a href="#">Notification 4</a></li>
                                <li><a href="#">Another notification</a></li>-->
                              </ul>
                        </li>
                        <li>
                           <a href="">
                                <i class="fa fa-search"></i>
                            </a>
                        </li>
                         
                    </ul>
                    
                    <ul class="nav navbar-nav navbar-right">
                        <!--
                        <li>
                           <a href="#" onclick="openRegisterModal();">
                               Account
                            </a>
                        </li>
                        -->
                        <li>
                            <a href="http://gorapaduk.dothome.co.kr/app.apk">
                               Get App
                            </a>
                        </li>
                        <li class="dropdown">
                              <a href="#" class="dropdown-toggle" data-toggle="dropdown">
                                    Dropdown
                                    <b class="caret"></b>
                              </a>
                              <ul class="dropdown-menu">
                                <li><a href="#" onclick="start();">Run</a></li>
                                <li><a href="#" onclick="stop();">Stop</a></li>
                                <li><a href="#" onclick="location.reload();" >Refresh</a></li>
                                
                                <li><a href="#" onclick="Getgps();">Get my location</a></li>
                                <li><a href="#" onclick="openPhoneModal();">Get Phone Number</a></li>                                
                              </ul>
                        </li>
                        <?php

                        if($_SESSION['is_logged']=="YES"){
                            print "<li><a href='#' onclick='logout();';>Log out</a></li>";
                        }
                        else{
                            print '<li><a href="#" onclick="openRegisterModal();"> Account </a></li><li><a href="#" onclick="openLoginModal();">Log in</a></li> ';
                        }
                        ?>
                        <!--
                        <li>
                            <a href="#" onclick="openLoginModal();">
                                Log in
                            </a>
                        </li> 
                    -->
                    </ul>
                </div>
            </div>
        </nav>
                             
        <div class="content">            
            <div class="container-fluid">
                <div class="row">                   
                    <div class="col-md-12">
                        <div class="card">
                            <div class="header">
                                <h4 class="title">Beta Service</h4>
                                <?php
                                    if($_SESSION['is_logged']=="YES"){
                                        print '<p class="category">'.$_SESSION['login_user']. '손님 반갑습니다</p>';
                                    }
                                    else{
                                        print '<p class="category">'. '손님 반갑습니다</p>';
                                    }
                                ?>                                  
         
                            </div>
                            <div class="content table-responsive table-full-width">
                                <div ng-app="myApp" ng-controller="customersCtrl"> <!-- Angular 시작 -->
                                    <table id="table1"class="table table-hover table-striped">
                                        <thead>
                                            <th>ID</th>
                                            <!--<th>Image</th>-->                                            
                                            <th>Name</th>            
                                            <th>Number</th>                                                                        
                                        </thead>
                                        <tbody>
                                            <tr ng-repeat="x in names">                                               
                                                <td>{{x.idx }}</td>
                                                <!--<td>Image</td>-->
                                                <td>{{x.name}}</td>   
                                                <td>{{x.number}}</td>                                                                                          
                                            </tr>
                                        </tbody>
                                        <script>                                            
                                        </script>
                                    </table>
                                </div>                                                                
                            </div>
                        </div>
                    </div>                                                                          
                </div>                    
            </div>
        </div>        
        <script>
          
          var app = angular.module('myApp', []);
          app.controller('customersCtrl', function($scope, $http) {
            console.log("angular");
                var id = String(<?php 
                    if($_SESSION['is_logged']=="YES")
                        //echo $_SESSION['login_user'];
                        echo "true";
                    else 
                        echo "false";
                    // echo "notlogin"; 시 에러-0-; 숫자, true,false만 되는듯
                ?>);
                
                if(id=="false")
                {
                    $http.get("client.json")
                      .then(function(response) {            
                          $scope.names = response.data.records;
                     });
                }
                else{
                //var temp = "temp"+<?php print $_SESSION['login_user']; ?>+".json";                
                  $http.get("addrjson/"+"address"+"<?php echo $_SESSION['login_user'];?>"+".json")
                  .then(function(response) {            
                    $scope.names = response.data.records;
                  });
            }
              $scope.edit = function(value)
              {
                alert(value);                    
              };
              /*
              <li ng-repeat="x in names | orderBy:'idx'">
              <!--<h1>{{ x.flightname }}</h1><h2>{{ x.stime }}</h2>-->
              <button ng-click="edit(x.idx)">Index</button> 
              */
          });
        </script>
        <!--
        <script language="javascript">
            function pushed() {
                var table = document.getElementById("table1");
                var rowlen = table.rows.length;
                //var row = table.insertRow();      // IE와 Chrome 동작을 달리함.
                var row = table.insertRow(rowlen);    // HTML에서의 권장 표준 문법
                row.insertCell(0).innerHTML = "첫번째";
                row.insertCell(1).innerHTML = "두번째";
                row.insertCell(2).innerHTML = "세번째";
                row.insertCell(3).innerHTML = "네번째";
                row.insertCell(4).innerHTML = "다섯번째";
        }
        </script>
        -->
        <footer class="footer">
            <div class="container-fluid">
                <nav class="pull-left">
                    <ul>
                        <li>
                            <a href="#">
                                Home
                            </a>
                        </li>
                        <li>
                            <a href="#">
                                Company
                            </a>
                        </li>
                        <li>
                            <a href="#">
                                Portfolio
                            </a>
                        </li>
                        <li>
                            <a href="#">
                               Blog
                            </a>
                        </li>
                    </ul>
                </nav>
                <p class="copyright pull-right">
                    &copy; 2015 <a href="http://www.creative-tim.com">Creative Tim</a>, made with love for a better web
                </p>
            </div>
        </footer>                
    </div>       
</div>
<!-- Login -->
<div class="modal fade login" id="loginModal">
              <div class="modal-dialog login animated">
                  <div class="modal-content">
                     <div class="modal-header">
                        <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
                        <h4 class="modal-title">Login with</h4>
                    </div>
                    <div class="modal-body">  
                        <div class="box">
                             <div class="content">
                                <div class="social">
                                    <a class="circle github" href="/auth/github">
                                        <i class="fa fa-github fa-fw"></i>
                                    </a>
                                    <a id="google_login" class="circle google" href="/auth/google_oauth2">
                                        <i class="fa fa-google-plus fa-fw"></i>
                                    </a>
                                    <a id="facebook_login" class="circle facebook" href="/auth/facebook">
                                        <i class="fa fa-facebook fa-fw"></i>
                                    </a>
                                    <div class="login_box">
                                     <?=$naver->login()?>
                                    </div>
                                </div>
                                <div class="division">
                                    <div class="line l"></div>
                                      <span>or</span>
                                    <div class="line r"></div>
                                </div>
                                <div class="error"></div>
                                <div class="form loginBox">
                                    <!--<form method="post" action="/login" accept-charset="UTF-8">-->
                                    <!--<form name="login_form" method="post" action="./logintest.php" >-->
                                    <input id="id" class="form-control" type="text" placeholder="Email" name="id">
                                    <input id="password" class="form-control" type="password" placeholder="Password" name="password">
                                    <input class="btn btn-default btn-login" type="button" value="Login" onclick="loginwithAjax()">
                                    <!--<input class="btn btn-default btn-login" type="submit" value="Login" />
                                    </form>-->
                                </div>
                             </div>
                        </div>
                        <div class="box">
                            <div class="content registerBox" style="display:none;">
                             <div class="form">
                                <form method="post" html="{:multipart=>true}" data-remote="true" action="/register" accept-charset="UTF-8">
                                <input id="id" class="form-control" type="text" placeholder="Email" name="id">
                                <input id="password" class="form-control" type="password" placeholder="Password" name="password">
                                <input id="password_confirmation" class="form-control" type="password" placeholder="Repeat Password" name="password_confirmation">
                                <input class="btn btn-default btn-register" type="submit" value="Create account" name="commit">
                                </form>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="modal-footer">
                        <div class="forgot login-footer">
                            <span>Looking to 
                                 <a href="javascript: showRegisterForm();">create an account</a>
                            ?</span>
                        </div>
                        <div class="forgot register-footer" style="display:none">
                             <span>Already have an account?</span>
                             <a href="javascript: showLoginForm();">Login</a>
                        </div>
                    </div>        
                  </div>
              </div>
</div>
<div class="modal fade login" id="PhoneModal">
              <div class="modal-dialog login animated">
                  <div class="modal-content">
                     <div class="modal-header">
                        <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
                        <h4 >Get Phone Number</h4>
                    </div>
                    <div class="modal-body">  
                        <div class="box">
                             <div class="content">                               
                                <div class="error"></div>
                                <div class="form loginBox">                                    
                                    <input id="num" class="form-control" type="text" placeholder="Input Name" name="num">                                    
                                    <input class="btn btn-default btn-login" type="button" value="Get" onclick="Getaddr();">                                    
                                </div>
                             </div>
                        </div>                       
                    </div>                        
                  </div>
              </div>
</div>
<!-- Login End -->
</body>

    <!--   Core JS Files   -->
    
    <script src="assets/js/bootstrap.min.js" type="text/javascript"></script>
    
    <!--  Checkbox, Radio & Switch Plugins -->
    <script src="assets/js/bootstrap-checkbox-radio-switch.js"></script>
    
    <!--  Charts Plugin -->
    <script src="assets/js/chartist.min.js"></script>

    <!--  Notifications Plugin    -->
    <script src="assets/js/bootstrap-notify.js"></script>
    
    <!--  Google Maps Plugin    -->
    <script type="text/javascript" src="https://maps.googleapis.com/maps/api/js?sensor=false"></script>
    
    <!-- Light Bootstrap Table Core javascript and methods for Demo purpose -->
    <script src="assets/js/light-bootstrap-dashboard.js"></script>
    
    <!-- Light Bootstrap Table DEMO methods, don't include it in your project! -->
    <script src="assets/js/demo.js"></script>

</html>